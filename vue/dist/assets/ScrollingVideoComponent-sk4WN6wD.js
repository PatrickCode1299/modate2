import{_ as D,r as m,e as c,f as d,F as T,l as U,v as ue,c as b,o as $,d as L,u as pe,g as o,t as f,h as k,x as A,j as W,R as j,p as z,q as G,y as H,z as ve,i as _e,k as C,A as B,B as me,n as he,m as P,C as K,D as fe,E as ye,G as ge,H as ke}from"./index-PjQiA5ak.js";const Se={class:"skeleton-loader"},Ce=ue('<div class="skeleton-video" data-v-5a5b7262></div><div class="skeleton-overlay" data-v-5a5b7262><div class="skeleton-profile" data-v-5a5b7262><div class="skeleton-avatar" data-v-5a5b7262></div><div class="skeleton-text" data-v-5a5b7262></div></div><div class="skeleton-caption" data-v-5a5b7262></div><div class="skeleton-actions" data-v-5a5b7262><div class="skeleton-action" data-v-5a5b7262></div><div class="skeleton-action" data-v-5a5b7262></div><div class="skeleton-action" data-v-5a5b7262></div></div></div>',2),we=[Ce],Ee={__name:"ScrollingVideoSkeletonLoader",setup(p){const y=m(3);return(l,v)=>(c(),d("div",Se,[(c(!0),d(T,null,U(y.value,g=>(c(),d("div",{key:g,class:"skeleton-video-container"},we))),128))]))}},Ie=D(Ee,[["__scopeId","data-v-5a5b7262"]]),q=p=>(z("data-v-e151700e"),p=p(),G(),p),be=["id"],$e=q(()=>o("i",{class:"fa-solid fa-heart"},null,-1)),Le={style:{display:"block"}},Te={class:"action-item"},Ve=q(()=>o("i",{class:"fa-light fa-comment-dots"},null,-1)),Be=q(()=>o("i",{class:"fa-light fa-share-all"},null,-1)),Pe={__name:"ScrollVideoLikeShareCommentComponent",props:["post_id","post_content","post_owner"],setup(p){let y=p,l=y.post_id,v=y.post_content;y.post_content.post_is_comment_status,localStorage.getItem("ISSOUND");let g=localStorage.getItem("USER_MAIL");localStorage.getItem("PICTURE"),b({post_data:y.post_content});let n=b({post_id:"",count:v.post_likes_count,commentCount:v.post_comments_count,shareCount:v.post_shares_count,quoteCount:v.post_shares_count});b({tagged_users:[],tagged_users_result:{}}),b({info:[],value:[]}),$(()=>{let r=new FormData;r.append("post_id",l),r.append("email",g),L.post("/findAllPostUserLiked",r).then(i=>{i.data.reply==="true"?document.getElementById(l).style.color="red":document.getElementById(l).style.color="white"}).catch(i=>{console.log(i)})});function h(){let r=new FormData;r.append("email",g),r.append("post_id",l),L.post("/checkIfUserLiked",r).then(i=>{i.data.reply==="false"?L.post("/DeleteLike",r).then(_=>{n.count-=1,document.getElementById(l).style.color="white"}).catch(_=>{console.log(_)}):(n.count+=1,document.getElementById(l).setAttribute("class","liked"),document.getElementById(l).style.color="red")}).catch(i=>{console.log(i)}),document.getElementById(l).style.color="red"}pe();async function w(){const i={title:"From Hexarex",text:"See this Post on Hexarex.com",url:"https://hexarex.com/status/"+l};try{await navigator.share(i)}catch(_){console.log(_)}}return(r,i)=>(c(),d(T,null,[o("div",{id:k(l),class:"action-item",onClick:i[0]||(i[0]=_=>h(k(l)))},[$e,o("span",Le,f(k(n).count),1)],8,be),o("div",Te,[A(k(j),{to:`/status/${k(l)}`},{default:W(()=>[Ve,o("span",null,f(k(n).commentCount),1)]),_:1},8,["to"])]),o("div",{onClick:i[1]||(i[1]=_=>w()),class:"action-item"},[Be,o("span",null,f(k(n).shareCount),1)])],64))}},Ue=D(Pe,[["__scopeId","data-v-e151700e"]]),S=p=>(z("data-v-f8a73b64"),p=p(),G(),p),Ae={class:"video-feed"},De=["src","muted","onCanplay","onWaiting","onPlaying","onClick","onLoadedmetadata","onTimeupdate"],qe={key:1,class:"loading-spinner"},xe=S(()=>o("div",{class:"spinner"},null,-1)),Me=[xe],Ne={key:2,class:"play-pause-controls"},Re=["onClick"],Fe=S(()=>o("span",{id:"play"},[o("i",{class:"fas fa-play"})],-1)),Xe=S(()=>o("span",{style:{display:"none"},id:"pause"},[o("i",{class:"fas fa-pause"})],-1)),He=[Fe,Xe],Ke={class:"overlay p-2"},We={class:"profile"},je={key:0,style:{"object-fit":"cover"},src:ge,alt:"profile"},ze=["src"],Ge={class:"caption"},Oe=["max"],Je={class:"time-display"},Qe={class:"actions"},Ye=["onClick"],Ze=S(()=>o("i",{class:"fa-solid fa-arrow-up"},null,-1)),et=[Ze],tt=["onClick"],ot=S(()=>o("i",{class:"fa-solid fa-arrow-down"},null,-1)),st=[ot],nt=S(()=>o("h3",null,"Comments",-1)),at={__name:"ScrollingVideoComponent",setup(p){const y=localStorage.getItem("USER_MAIL"),l=m([]),v=m(0),g=m(0),n=m(0),h=m(null),w=m(!1),r=m(null),i=m(""),_=m([]),O=e=>`https://res.cloudinary.com/fishfollowers/video/upload/${e}`,J=e=>`https://res.cloudinary.com/fishfollowers/image/upload/${e}`,Q=(e,t)=>{t===n.value&&(e.target.play().catch(s=>{console.error("Play failed:",s)}),_.value[t]=!1)},Y=e=>{_.value[e]=!0},Z=e=>{_.value[e]=!1},E=()=>{ke(()=>{document.querySelectorAll("video").forEach((t,s)=>{s===n.value?(t.play().catch(a=>{console.error("Play failed:",a)}),document.getElementById("pause").style.display="block",document.getElementById("play").style.display="none"):t.pause()})})},x=e=>{const t=document.querySelectorAll("video")[e];t.paused?(document.getElementById("play").style.display="none",document.getElementById("pause").style.display="block",t.play().catch(s=>{console.error("Play failed:",s)})):(document.getElementById("pause").style.display="none",document.getElementById("play").style.display="block",t.pause())};function ee(e){const t=document.querySelectorAll("video")[e];g.value=t.duration}function V(e){let t=l.value.length-1;h.value=n.value,t===e?n.value=0:n.value=e+1,E(),setTimeout(()=>{h.value=null},500)}function M(e){if(e===0){let t=l.value.length-1;n.value=t}else n.value=e-1;E(),setTimeout(()=>{h.value=null},500)}const te=(e,t)=>{const s=e.target;s.currentTime>=s.duration-.5&&oe(t),v.value=s.currentTime};function oe(e){let t=l.value.length-1;h.value=n.value,t===e?n.value=0:n.value=e+1,E(),setTimeout(()=>{h.value=null},500)}let N=0,R=0;const se=()=>{R>N+50&&V(n.value)},ne=e=>{N=e.changedTouches[0].screenX},ae=e=>{R=e.changedTouches[0].screenX,se()},le=()=>{w.value=!1},ie=()=>{i.value.trim()&&(r.value.commentsList.push({id:r.value.commentsList.length+1,author:"CurrentUser",text:i.value}),i.value="")},ce=e=>{if(e!=null)return e.length<400?e:e.slice(0,400)+"....See More"};$(()=>{window.addEventListener("keydown",de),E()});const de=e=>{e.key==="ArrowUp"?M(n.value):e.key==="ArrowDown"&&V(n.value)};H(()=>{document.querySelectorAll("video").forEach(t=>{t.paused||t.pause()})}),$(async()=>{(await L.post("/fetchAllChannelsVideo",{email:y}).catch(t=>{})).data.reply.forEach(t=>{l.value.push(t)})});const I=()=>{if(navigator.onLine){const e=document.querySelector(".video-container.active video");e&&e.play().catch(t=>{console.error("Error playing video:",t)})}},F=()=>{const e=document.querySelectorAll("video")[n.value];e&&(e.currentTime=v.value)},X=e=>{const t=Math.floor(e/3600),s=Math.floor(e%3600/60),a=Math.floor(e%60);return t>0?`${t}:${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`:`${s}:${a.toString().padStart(2,"0")}`},re=()=>{const e=document.querySelector(".video-container.active video");e&&(e.pause(),e.src="",e.currentTime=0)};return $(()=>{window.addEventListener("online",I),window.addEventListener("offline",I)}),ve(()=>{window.removeEventListener("online",I),window.removeEventListener("offline",I);const e=document.querySelector(".video-container.active video");e&&(e.pause(),e.src="",e.currentTime=0)}),H(()=>{re()}),(e,t)=>(c(),d("div",Ae,[l.value.length===0?(c(),_e(Ie,{key:0})):C("",!0),(c(!0),d(T,null,U(l.value,(s,a)=>B((c(),d("div",{key:s.id,class:he(["video-container",{active:n.value===a,exiting:h.value===a}]),onTouchstart:ne,onTouchend:ae},[s.video?(c(),d("video",{key:0,ref_for:!0,ref:"video",src:O(s.video),loop:"",playsinline:"",oncontextmenu:"return false;",muted:a!==n.value,onCanplay:u=>Q(u,a),onWaiting:u=>Y(a),onPlaying:u=>Z(a),onClick:u=>x(a),onLoadedmetadata:u=>ee(a),onTimeupdate:u=>te(u,a)},null,40,De)):C("",!0),_.value[a]?(c(),d("div",qe,Me)):C("",!0),n.value===a?(c(),d("div",Ne,[o("button",{onClick:u=>x(a),class:"play-btn"},He,8,Re)])):C("",!0),o("div",Ke,[o("div",We,[s.profile_picture===null?(c(),d("img",je)):(c(),d("img",{key:1,src:J(s.profile_picture),alt:"profile"},null,8,ze)),o("p",null,[A(k(j),{to:`/channel/${s.email}`},{default:W(()=>[P(f(s.name),1)]),_:2},1032,["to"])])]),o("p",Ge,f(ce(s.caption)),1),B(o("input",{type:"range",class:"seek-slider",min:"0",max:g.value,step:"0.1","onUpdate:modelValue":t[0]||(t[0]=u=>v.value=u),onInput:F,onChange:F},null,40,Oe),[[K,v.value]]),o("div",Je,[o("span",null,f(X(v.value)),1),P(" / "),o("span",null,f(X(g.value)),1)]),o("div",Qe,[o("button",{onClick:u=>M(a),class:"btn video-control-btn btn-md font-bold m-2"},et,8,Ye),o("button",{onClick:u=>V(a),class:"btn video-control-btn btn-md font-bold m-2"},st,8,tt),A(Ue,{post_content:{post_likes_count:s.likes,post_comments_count:s.comments,post_shares_count:s.shares},post_owner:s.email,post_id:s.postid},null,8,["post_content","post_owner","post_id"])])])],34)),[[me,a===n.value||a===h.value]])),128)),w.value?(c(),d("div",{key:1,class:"comments-modal",onClick:le},[o("div",{class:"comments-content",onClick:t[2]||(t[2]=ye(()=>{},["stop"]))},[nt,(c(!0),d(T,null,U(r.value.commentsList,s=>(c(),d("div",{key:s.id,class:"comment-item"},[o("p",null,[o("strong",null,f(s.author),1),P(": "+f(s.text),1)])]))),128)),B(o("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=s=>i.value=s),placeholder:"Add a comment...",onKeyup:fe(ie,["enter"])},null,544),[[K,i.value]])])])):C("",!0)]))}},it=D(at,[["__scopeId","data-v-f8a73b64"]]);export{it as default};
