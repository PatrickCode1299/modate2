import{_ as A,r as m,e as c,f as r,F as L,m as P,q as ie,c as E,o as b,d as I,u as re,g as o,t as y,j as g,s as U,k as K,R as W,v as F,x as ce,i as de,h as k,y as V,z as ue,n as ve,A as pe,p as B,B as X,C as me,D as fe,E as ye}from"./index-3XR7Uy0D.js";const _e={class:"skeleton-loader"},he={__name:"ScrollingVideoSkeletonLoader",setup($){const _=m(3);return(i,u)=>(r(),c("div",_e,[(r(!0),c(L,null,P(_.value,h=>(r(),c("div",{key:h,class:"skeleton-video-container"},u[0]||(u[0]=[ie('<div class="skeleton-video" data-v-5a5b7262></div><div class="skeleton-overlay" data-v-5a5b7262><div class="skeleton-profile" data-v-5a5b7262><div class="skeleton-avatar" data-v-5a5b7262></div><div class="skeleton-text" data-v-5a5b7262></div></div><div class="skeleton-caption" data-v-5a5b7262></div><div class="skeleton-actions" data-v-5a5b7262><div class="skeleton-action" data-v-5a5b7262></div><div class="skeleton-action" data-v-5a5b7262></div><div class="skeleton-action" data-v-5a5b7262></div></div></div>',2)])))),128))]))}},ge=A(he,[["__scopeId","data-v-5a5b7262"]]),ke=["id"],Ce={style:{display:"block"}},Se={class:"action-item"},we={__name:"ScrollVideoLikeShareCommentComponent",props:["post_id","post_content","post_owner"],setup($){let _=$,i=_.post_id,u=_.post_content;_.post_content.post_is_comment_status,localStorage.getItem("ISSOUND");let h=localStorage.getItem("USER_MAIL");localStorage.getItem("PICTURE"),E({post_data:_.post_content});let l=E({post_id:"",count:u.post_likes_count,commentCount:u.post_comments_count,shareCount:u.post_shares_count,quoteCount:u.post_shares_count});E({tagged_users:[],tagged_users_result:{}}),E({info:[],value:[]}),b(()=>{let d=new FormData;d.append("post_id",i),d.append("email",h),I.post("/findAllPostUserLiked",d).then(s=>{s.data.reply==="true"?document.getElementById(i).style.color="red":document.getElementById(i).style.color="white"}).catch(s=>{console.log(s)})});function f(){let d=new FormData;d.append("email",h),d.append("post_id",i),I.post("/checkIfUserLiked",d).then(s=>{s.data.reply==="false"?I.post("/DeleteLike",d).then(p=>{l.count-=1,document.getElementById(i).style.color="white"}).catch(p=>{console.log(p)}):(l.count+=1,document.getElementById(i).setAttribute("class","liked"),document.getElementById(i).style.color="red")}).catch(s=>{console.log(s)}),document.getElementById(i).style.color="red"}re();async function C(){const s={title:"From Hexarex",text:"See this Post on Hexarex.com",url:"https://hexarex.com/status/"+i};try{await navigator.share(s)}catch(p){console.log(p)}}return(d,s)=>(r(),c(L,null,[o("div",{id:g(i),class:"action-item",onClick:s[0]||(s[0]=p=>f(g(i)))},[s[2]||(s[2]=o("i",{class:"fa-solid fa-heart"},null,-1)),o("span",Ce,y(g(l).count),1)],8,ke),o("div",Se,[U(g(W),{to:`/status/${g(i)}`},{default:K(()=>[s[3]||(s[3]=o("i",{class:"fa-light fa-comment-dots"},null,-1)),o("span",null,y(g(l).commentCount),1)]),_:1},8,["to"])]),o("div",{onClick:s[1]||(s[1]=p=>C()),class:"action-item"},[s[4]||(s[4]=o("i",{class:"fa-light fa-share-all"},null,-1)),o("span",null,y(g(l).shareCount),1)])],64))}},Ee=A(we,[["__scopeId","data-v-e151700e"]]),be={class:"video-feed"},Ie=["src","muted","onCanplay","onWaiting","onPlaying","onClick","onLoadedmetadata","onTimeupdate"],Le={key:1,class:"loading-spinner"},$e={key:2,class:"play-pause-controls"},Te=["onClick"],Ve={class:"overlay p-2"},Be={class:"profile"},Pe={key:0,style:{"object-fit":"cover"},src:pe,alt:"profile"},Ue=["src"],Ae={class:"caption"},De=["max"],qe={class:"time-display"},xe={class:"actions"},Me=["onClick"],Ne=["onClick"],Re={__name:"ScrollingVideoComponent",setup($){const _=localStorage.getItem("USER_MAIL"),i=m([]),u=m(0),h=m(0),l=m(0),f=m(null),C=m(!1),d=m(null),s=m(""),p=m([]),j=e=>`https://res.cloudinary.com/fishfollowers/video/upload/${e}`,z=e=>`https://res.cloudinary.com/fishfollowers/image/upload/${e}`,H=(e,t)=>{t===l.value&&(e.target.play().catch(n=>{console.error("Play failed:",n)}),p.value[t]=!1)},O=e=>{p.value[e]=!0},G=e=>{p.value[e]=!1},S=()=>{ye(()=>{document.querySelectorAll("video").forEach((t,n)=>{n===l.value?(t.play().catch(a=>{console.error("Play failed:",a)}),document.getElementById("pause").style.display="block",document.getElementById("play").style.display="none"):t.pause()})})},D=e=>{const t=document.querySelectorAll("video")[e];t.paused?(document.getElementById("play").style.display="none",document.getElementById("pause").style.display="block",t.play().catch(n=>{console.error("Play failed:",n)})):(document.getElementById("pause").style.display="none",document.getElementById("play").style.display="block",t.pause())};function J(e){const t=document.querySelectorAll("video")[e];h.value=t.duration}function T(e){let t=i.value.length-1;f.value=l.value,t===e?l.value=0:l.value=e+1,S(),setTimeout(()=>{f.value=null},500)}function q(e){if(e===0){let t=i.value.length-1;l.value=t}else l.value=e-1;S(),setTimeout(()=>{f.value=null},500)}const Q=(e,t)=>{const n=e.target;n.currentTime>=n.duration-.5&&Y(t),u.value=n.currentTime};function Y(e){let t=i.value.length-1;f.value=l.value,t===e?l.value=0:l.value=e+1,S(),setTimeout(()=>{f.value=null},500)}let x=0,M=0;const Z=()=>{M>x+50&&T(l.value)},ee=e=>{x=e.changedTouches[0].screenX},te=e=>{M=e.changedTouches[0].screenX,Z()},oe=()=>{C.value=!1},ne=()=>{s.value.trim()&&(d.value.commentsList.push({id:d.value.commentsList.length+1,author:"CurrentUser",text:s.value}),s.value="")},se=e=>{if(e!=null)return e.length<400?e:e.slice(0,400)+"....See More"};b(()=>{window.addEventListener("keydown",le),S()});const le=e=>{e.key==="ArrowUp"?q(l.value):e.key==="ArrowDown"&&T(l.value)};F(()=>{document.querySelectorAll("video").forEach(t=>{t.paused||t.pause()})}),b(async()=>{(await I.post("/fetchAllChannelsVideo",{email:_}).catch(t=>{})).data.reply.forEach(t=>{i.value.push(t)})});const w=()=>{if(navigator.onLine){const e=document.querySelector(".video-container.active video");e&&e.play().catch(t=>{console.error("Error playing video:",t)})}},N=()=>{const e=document.querySelectorAll("video")[l.value];e&&(e.currentTime=u.value)},R=e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),a=Math.floor(e%60);return t>0?`${t}:${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`:`${n}:${a.toString().padStart(2,"0")}`},ae=()=>{const e=document.querySelector(".video-container.active video");e&&(e.pause(),e.src="",e.currentTime=0)};return b(()=>{window.addEventListener("online",w),window.addEventListener("offline",w)}),ce(()=>{window.removeEventListener("online",w),window.removeEventListener("offline",w);const e=document.querySelector(".video-container.active video");e&&(e.pause(),e.src="",e.currentTime=0)}),F(()=>{ae()}),(e,t)=>(r(),c("div",be,[i.value.length===0?(r(),de(ge,{key:0})):k("",!0),(r(!0),c(L,null,P(i.value,(n,a)=>V((r(),c("div",{key:n.id,class:ve(["video-container",{active:l.value===a,exiting:f.value===a}]),onTouchstart:ee,onTouchend:te},[n.video?(r(),c("video",{key:0,ref_for:!0,ref:"video",src:j(n.video),loop:"",playsinline:"",oncontextmenu:"return false;",muted:a!==l.value,onCanplay:v=>H(v,a),onWaiting:v=>O(a),onPlaying:v=>G(a),onClick:v=>D(a),onLoadedmetadata:v=>J(a),onTimeupdate:v=>Q(v,a)},null,40,Ie)):k("",!0),p.value[a]?(r(),c("div",Le,t[3]||(t[3]=[o("div",{class:"spinner"},null,-1)]))):k("",!0),l.value===a?(r(),c("div",$e,[o("button",{onClick:v=>D(a),class:"play-btn"},t[4]||(t[4]=[o("span",{id:"play"},[o("i",{class:"fas fa-play"})],-1),o("span",{style:{display:"none"},id:"pause"},[o("i",{class:"fas fa-pause"})],-1)]),8,Te)])):k("",!0),o("div",Ve,[o("div",Be,[n.profile_picture===null?(r(),c("img",Pe)):(r(),c("img",{key:1,src:z(n.profile_picture),alt:"profile"},null,8,Ue)),o("p",null,[U(g(W),{to:`/channel/${n.email}`},{default:K(()=>[B(y(n.name),1)]),_:2},1032,["to"])])]),o("p",Ae,y(se(n.caption)),1),V(o("input",{type:"range",class:"seek-slider",min:"0",max:h.value,step:"0.1","onUpdate:modelValue":t[0]||(t[0]=v=>u.value=v),onInput:N,onChange:N},null,40,De),[[X,u.value]]),o("div",qe,[o("span",null,y(R(u.value)),1),t[5]||(t[5]=B(" / ")),o("span",null,y(R(h.value)),1)]),o("div",xe,[o("button",{onClick:v=>q(a),class:"btn video-control-btn btn-md font-bold m-2"},t[6]||(t[6]=[o("i",{class:"fa-solid fa-arrow-up"},null,-1)]),8,Me),o("button",{onClick:v=>T(a),class:"btn video-control-btn btn-md font-bold m-2"},t[7]||(t[7]=[o("i",{class:"fa-solid fa-arrow-down"},null,-1)]),8,Ne),U(Ee,{post_content:{post_likes_count:n.likes,post_comments_count:n.comments,post_shares_count:n.shares},post_owner:n.email,post_id:n.postid},null,8,["post_content","post_owner","post_id"])])])],34)),[[ue,a===l.value||a===f.value]])),128)),C.value?(r(),c("div",{key:1,class:"comments-modal",onClick:oe},[o("div",{class:"comments-content",onClick:t[2]||(t[2]=fe(()=>{},["stop"]))},[t[8]||(t[8]=o("h3",null,"Comments",-1)),(r(!0),c(L,null,P(d.value.commentsList,n=>(r(),c("div",{key:n.id,class:"comment-item"},[o("p",null,[o("strong",null,y(n.author),1),B(": "+y(n.text),1)])]))),128)),V(o("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=n=>s.value=n),placeholder:"Add a comment...",onKeyup:me(ne,["enter"])},null,544),[[X,s.value]])])])):k("",!0)]))}},Xe=A(Re,[["__scopeId","data-v-f8a73b64"]]);export{Xe as default};
