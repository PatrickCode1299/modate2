import{_ as W,u as Z,r as x,c as y,d as w,w as I,S as tt,e as o,f as e,g as n,j as i,h as a,n as N,A,F as h,m as v,t as d,y as P,z as O,i as j,V as B,s as et}from"./index-3XR7Uy0D.js";const ot={class:"stories-and-div-container"},st={class:"user-story"},rt={key:0,class:"text-bold spinner cursor-pointer fs-4"},lt={key:1,class:"stories-preview"},nt={id:"scroll-images",style:{"max-width":"100%",position:"inherit",height:"200px","scroll-behavior":"smooth",padding:"0px 0px",overflow:"scroll","overflow-x":"hidden","-webkit-overflow-scrolling":"touch","overflow-y":"hidden"},class:"swiper-wrapper"},it={class:"list-unstyled swiper-slide",style:{width:"50%",height:"190px",position:"relative"}},at=["src"],ct={class:"list-unstyled swiper-slide",style:{width:"50%",height:"190px",position:"relative","margin-left":"5px"}},dt=["onClick"],ut=["onClick","src"],pt={class:"text-white",style:{"font-weight":"bold","font-size":"12px","text-shadow":"2px 2px 2px black",position:"absolute",bottom:"0px",left:"40%"}},_t={key:0,style:{position:"absolute",width:"100%",display:"flex","flex-direction":"row","justify-content":"space-around","z-index":"1",top:"40%"}},gt={id:"set-story",class:"story-posts-container"},ft={class:"story-keeper",style:{color:"white"}},yt={style:{top:"0px"},class:"story-count-indicator d-flex justify-content-flex-start"},ht={class:"fs-2",style:{"font-weight":"bold",color:"white"}},mt={key:0,class:"loading spinner"},xt=["src"],wt={key:1,style:{"word-wrap":"break-word"}},vt={key:0,class:"font-bold text-align-center d-flex justify-content-center align-items-center",style:{position:"absolute","white-space":"pre-wrap","word-wrap":"break-word",height:"100%",width:"100%",left:"0px",top:"0px","background-color":"magenta"}},bt={key:1,class:"font-bold text-align-center d-flex justify-content-center align-items-center",style:{position:"absolute","white-space":"pre-wrap","word-wrap":"break-word",height:"100%",width:"100%",left:"0px",top:"0px","background-color":"maroon"}},St={key:2,class:"font-bold text-align-center d-flex justify-content-center align-items-center",style:{position:"absolute","white-space":"pre-wrap","word-wrap":"break-word",height:"100%",width:"100%",left:"0px",top:"0px","background-color":"purple"}},kt={key:3,class:"font-bold text-align-center d-flex justify-content-center align-items-center",style:{position:"absolute","white-space":"pre-wrap","word-wrap":"break-word",height:"100%",width:"100%",left:"0px",top:"0px","background-color":"forestgreen"}},Et={id:"friend-story",class:"story-posts-container"},It={class:"story-keeper",style:{color:"white"}},Tt={style:{top:"0px"},class:"story-count-indicator d-flex justify-content-center"},Ct={class:"fs-3",style:{"font-weight":"bold",color:"white"}},Nt={key:0,class:"loading spinner"},At={key:1,class:"slideshow-container",style:{"margin-top":"0px"}},Pt=["src"],Ot={key:1,style:{"background-color":"magenta"}},jt={key:0,class:"font-bold text-align-center d-flex justify-content-center align-items-center",style:{position:"absolute","white-space":"pre-wrap",height:"100%",width:"100%",left:"0px",top:"0px","background-color":"magenta"}},Bt={key:1,class:"font-bold text-align-center d-flex justify-content-center align-items-center",style:{position:"absolute","white-space":"pre-wrap",height:"100%",width:"100%",left:"0px",top:"0px","background-color":"maroon"}},Wt={key:2,class:"font-bold text-align-center d-flex justify-content-center align-items-center",style:{position:"absolute","white-space":"pre-wrap",height:"100%",width:"100%",left:"0px",top:"0px","background-color":"purple"}},Ft={key:3,class:"font-bold text-align-center d-flex justify-content-center align-items-center",style:{position:"absolute","white-space":"pre-wrap",height:"100%",width:"100%",left:"0px",top:"0px","background-color":"forestgreen"}},Vt={__name:"StoriesComponent",setup(F){const k=Z(),b=localStorage.getItem("USER_MAIL"),V=x("");let S=x(),f=y({picture:"",isLoadingStoryPic:"true"});w.post("/profile",{email:b}).then(s=>{s.data.info!=="false"&&(f.isLoadingStoryPic="false",localStorage.setItem("FIRSTNAME",s.data.first_name),localStorage.setItem("LASTNAME",s.data.last_name),localStorage.setItem("LOCATION",s.data.location),localStorage.setItem("PHONE",s.data.phone_number),localStorage.setItem("PICTURE",s.data.profile_picture),localStorage.setItem("COVER_PHOTO",s.data.coverPhoto),f.picture=localStorage.getItem("PICTURE"))}),I(S,()=>{S.value.trim().length>0?document.getElementById("post-button").removeAttribute("disabled"):document.getElementById("post-button").setAttribute("disabled","true")});let E=y({tagged_users:[],tagged_users_result:{}});y({info:[],value:[]}),I(S,()=>{let s=S.value,l=/\B@[a-z0-9_-]+/gi,t=s.match(l);if(t===null)console.log(null);else{t.forEach(m=>{E.tagged_users=m}),document.getElementById("tag_box").style.display="block";let c=new FormData,X=E.tagged_users.substring(1);c.append("search_info",X),w.post("/Search",c).then(m=>{E.tagged_users_result=m.data.reply}).catch(m=>{console.log(m)})}});let u=y({date:"",name:"",avatar:"",caption:"",email:"",postid:""});I(u,()=>{sessionStorage.removeItem("NEW_POST_DATE"),sessionStorage.removeItem("NEW_POSTER_NAME"),sessionStorage.removeItem("NEW_POST_AVATAR"),sessionStorage.removeItem("NEW_POST_CAPTION"),sessionStorage.setItem("NEW_POST_DATE",u.date),sessionStorage.setItem("NEW_POSTER_NAME",u.name),sessionStorage.setItem("NEW_POST_AVATAR",u.avatar),sessionStorage.setItem("NEW_POST_CAPTION",u.caption),sessionStorage.setItem("NEW_POST_POSTID",u.postid),sessionStorage.setItem("NEW_POST_EMAIL",u.email),location.reload()}),y({date:sessionStorage.getItem("NEW_POST_DATE"),name:sessionStorage.getItem("NEW_POSTER_NAME"),avatar:sessionStorage.getItem("NEW_POST_AVATAR"),caption:sessionStorage.getItem("NEW_POST_CAPTION"),postid:sessionStorage.getItem("NEW_POST_POSTID"),email:sessionStorage.getItem("NEW_POST_EMAIL")});function R(){k.push({name:"create_story"})}let r=y({post:"",user_story_is_shown:"",friend_post:"",active:"m-2 story-preview-img",story_src:"",pagination:"",friend_src:"",number_of_story:"",user_friends:"",friends_picture:""}),p=x(0);const _=x(0);function T(){w.post("/findUserStory",{email:b}).then(s=>{s.data.reply==""?k.push({name:"create_story"}):(r.post=s.data.reply,z())}).catch(s=>{alert("Network Error")})}function z(){r.active="m-2 story-preview-img magenta";let s=document.getElementById("set-story");s.style.display="block",D()}var g=x("false");function D(){g.value="true",r.story_src=r.post,r.number_of_story=r.post.length}function L(){let s=document.getElementById("set-story");s.style.display="none",g.value="false"}function M(){w.post("/findUserFriend",{email:b}).then(s=>{let l=s.data.reply;V.value=l.length,r.user_friends=s.data.reply,r.pagination=s.data.pagination}).catch(s=>{alert("Some errors occured")})}function C(s){w.post("/findUserStory",{email:s}).then(l=>{r.friend_post=l.data.reply,U()}).catch(l=>{alert("Network Error")})}function U(){r.active="m-2 story-preview-img magenta";let s=document.getElementById("friend-story");s.style.display="block",$()}function $(){g.value="true",r.number_of_story=r.friend_post.length,r.friend_src=r.friend_post}function H(){let s=document.getElementById("friend-story");s.style.display="none",g.value="false"}function Y(){var s=document.getElementById("scroll-images");s.scrollBy({left:-200,behavior:"smooth"})}function q(){var s=document.getElementById("scroll-images");s.scrollBy({left:200,behavior:"smooth"})}M(),new tt(".swiper",{touchEventsTarget:"container",simulateTouch:!0,touchRatio:1,touchAngle:45,grabCursor:!0,direction:"vertical",loop:!0,pagination:{el:".swiper-pagination"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},scrollbar:{el:".swiper-scrollbar"}});const G=()=>{p.value=p.value===0?r.friend_src.length-1:p.value-1},J=()=>{p.value=p.value===r.friend_src.length-1?0:p.value+1},K=()=>{_.value=_.value===0?r.story_src.length-1:_.value-1},Q=()=>{_.value=_.value===r.story_src.length-1?0:_.value+1};return(s,l)=>(e(),o(h,null,[n("div",ot,[n("div",st,[i(f).isLoadingStoryPic==="true"?(e(),o("span",rt)):(e(),o("div",lt,[n("div",nt,[n("li",it,[n("span",{onClick:R,class:"m-3 border-50px text-success font-bold fs-1"},"+"),l[0]||(l[0]=n("label",{class:"text-white font-bold fs-6",style:{position:"absolute","text-shadow":"2px 2px 2px black",left:"10%",top:"80%",bottom:"0px"}},"Your Story",-1)),i(f).picture===null||i(f).picture==="null"?(e(),o("img",{key:0,onClick:T,style:{width:"100%","object-fit":"cover",height:"185px"},src:A,loading:"lazy",class:N(i(r).active)},null,2)):(e(),o("img",{key:1,style:{width:"100%","object-fit":"cover",height:"185px"},loading:"lazy",onClick:T,class:N(i(r).active),src:`https://res.cloudinary.com/fishfollowers/image/upload/v1722105000/${i(f).picture}`},null,10,at))]),(e(!0),o(h,null,v(i(r).user_friends,t=>(e(),o("li",ct,[t.picture===null||t.picture==="null"?(e(),o("img",{key:0,onClick:c=>C(t.email),style:{width:"100%","object-fit":"cover",height:"185px"},src:A,class:"m-2 story-preview-img"},null,8,dt)):(e(),o("img",{key:1,style:{width:"100%","object-fit":"cover",height:"185px"},onClick:c=>C(t.email),src:`https://res.cloudinary.com/fishfollowers/image/upload/v1722105000/${t.picture}`,class:"m-2 story-preview-img"},null,8,ut)),n("span",pt,d(t.first_name),1)]))),256))]),i(r).pagination==="true"?(e(),o("div",_t,[n("button",{onClick:Y,class:"btn btn-md btn-default"},l[1]||(l[1]=[n("i",{class:"text-white fs-1 fas fa-angle-double-left"},null,-1)])),n("button",{style:{"margin-left":"auto"},onClick:q,class:"btn btn-md btn-default"},l[2]||(l[2]=[n("i",{class:"text-white fs-1 fas fa-angle-double-right"},null,-1)]))])):a("",!0)]))])]),n("div",gt,[n("div",ft,[n("span",{onClick:L,style:{"font-size":"50px",position:"fixed","z-index":"1",right:"0px",top:"0px",color:"white","margin-top":"0px","font-weight":"bold"}},"×"),n("ul",yt,[(e(!0),o(h,null,v(i(r).number_of_story,t=>(e(),o("li",ht,"−"))),256))]),i(g)==="false"?(e(),o("span",mt)):a("",!0),(e(!0),o(h,null,v(i(r).story_src,(t,c)=>P((e(),o("div",{key:c,class:"slide"},[t.text==""&&t.isVideoFile==""?(e(),o("img",{key:0,class:"img-responsive story-img",src:`https://res.cloudinary.com/fishfollowers/image/upload/${t.file}`},null,8,xt)):a("",!0),t.text!=""&&t.isVideoFile==""?(e(),o("div",wt,[t.color==="user_text_story"?(e(),o("p",vt,d(t.text),1)):t.color==="user_text_maroon"?(e(),o("p",bt,d(t.text),1)):t.color==="user_text_purple"?(e(),o("p",St,d(t.text),1)):t.color==="user_text_green"?(e(),o("p",kt,d(t.text),1)):a("",!0)])):a("",!0),t.isVideoFile!=""?(e(),j(B,{key:2,style:{width:"100%",height:"80vh"},video_info:{source:t.file}},null,8,["video_info"])):a("",!0)])),[[O,_.value===c]])),128)),i(r).story_src.length>1?(e(),o("button",{key:1,class:"prev",onClick:K},l[3]||(l[3]=[n("i",{class:"fa-solid fa-angles-left"},null,-1)]))):a("",!0),i(r).story_src.length>1?(e(),o("button",{key:2,class:"next",onClick:Q},l[4]||(l[4]=[n("i",{class:"fa-solid fa-angles-right"},null,-1)]))):a("",!0)]),l[5]||(l[5]=n("span",{id:"title",style:{color:"white"}},null,-1))]),n("div",Et,[n("div",It,[n("span",{onClick:H,style:{"text-align":"center","font-size":"45px",position:"fixed","z-index":"1",top:"0px",right:"0px",color:"white","font-weight":"bold"}},"×"),n("ul",Tt,[(e(!0),o(h,null,v(i(r).number_of_story,t=>(e(),o("li",Ct,"−"))),256))]),i(g)==="false"?(e(),o("span",Nt)):a("",!0),i(g)==="true"?(e(),o("div",At,[(e(!0),o(h,null,v(i(r).friend_src,(t,c)=>P((e(),o("div",{key:c,class:"slide"},[t.text==""&&t.isVideoFile==""?(e(),o("img",{key:0,class:"img-responsive story-img",src:`https://res.cloudinary.com/fishfollowers/image/upload/${t.file}`},null,8,Pt)):a("",!0),t.text!=""&&t.isVideoFile==""?(e(),o("div",Ot,[t.color==="user_text_story"?(e(),o("p",jt,d(t.text),1)):t.color==="user_text_maroon"?(e(),o("p",Bt,d(t.text),1)):t.color==="user_text_purple"?(e(),o("p",Wt,d(t.text),1)):t.color==="user_text_green"?(e(),o("p",Ft,d(t.text),1)):a("",!0)])):a("",!0),t.isVideoFile!=""?(e(),j(B,{key:2,style:{width:"100%",height:"80vh"},video_info:{source:t.file}},null,8,["video_info"])):a("",!0)])),[[O,i(p)===c]])),128)),i(r).friend_src.length>1?(e(),o("button",{key:0,class:"prev",onClick:G},l[6]||(l[6]=[n("i",{class:"fa-solid fa-angles-left"},null,-1)]))):a("",!0),i(r).friend_src.length>1?(e(),o("button",{key:1,class:"next",onClick:J},l[7]||(l[7]=[n("i",{class:"fa-solid fa-angles-right"},null,-1)]))):a("",!0)])):a("",!0),l[8]||(l[8]=n("span",{id:"title",style:{color:"white"}},null,-1))])])],64))}},Rt=W(Vt,[["__scopeId","data-v-9b4a4954"]]),zt={class:"stories-and-div-container"},Dt={__name:"Status",setup(F){return(k,b)=>(e(),o("div",zt,[et(Rt)]))}},Mt=W(Dt,[["__scopeId","data-v-8d873c22"]]);export{Mt as default};
