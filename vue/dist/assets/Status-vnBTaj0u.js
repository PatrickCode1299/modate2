import{_ as V,u as tt,r as v,c as y,d as b,w as C,S as et,e,f as o,g as n,h as i,G as P,n as O,F as m,l as S,t as c,k as l,A as B,B as W,i as j,V as F,p as ot,q as st,x as rt}from"./index-PjQiA5ak.js";const d=x=>(ot("data-v-9b4a4954"),x=x(),st(),x),nt={class:"stories-and-div-container"},it={class:"user-story"},lt={key:0,class:"text-bold spinner cursor-pointer fs-4"},at={key:1,class:"stories-preview"},ct={id:"scroll-images",style:{"max-width":"100%",position:"inherit",height:"200px","scroll-behavior":"smooth",padding:"0px 0px",overflow:"scroll","overflow-x":"hidden","-webkit-overflow-scrolling":"touch","overflow-y":"hidden"},class:"swiper-wrapper"},dt={class:"list-unstyled swiper-slide",style:{width:"50%",height:"190px",position:"relative"}},_t=d(()=>n("label",{class:"text-white font-bold fs-6",style:{position:"absolute","text-shadow":"2px 2px 2px black",left:"10%",top:"80%",bottom:"0px"}},"Your Story",-1)),pt=["src"],ut={class:"list-unstyled swiper-slide",style:{width:"50%",height:"190px",position:"relative","margin-left":"5px"}},ht=["onClick"],gt=["onClick","src"],ft={class:"text-white",style:{"font-weight":"bold","font-size":"12px","text-shadow":"2px 2px 2px black",position:"absolute",bottom:"0px",left:"40%"}},yt={key:0,style:{position:"absolute",width:"100%",display:"flex","flex-direction":"row","justify-content":"space-around","z-index":"1",top:"40%"}},mt=d(()=>n("i",{class:"text-white fs-1 fas fa-angle-double-left"},null,-1)),xt=[mt],wt=d(()=>n("i",{class:"text-white fs-1 fas fa-angle-double-right"},null,-1)),vt=[wt],bt={id:"set-story",class:"story-posts-container"},St={class:"story-keeper",style:{color:"white"}},kt={style:{top:"0px"},class:"story-count-indicator d-flex justify-content-flex-start"},It={class:"fs-2",style:{"font-weight":"bold",color:"white"}},Et={key:0,class:"loading spinner"},Tt=["src"],Ct={key:1,style:{"word-wrap":"break-word"}},Nt={key:0,class:"font-bold text-align-center d-flex justify-content-center align-items-center",style:{position:"absolute","white-space":"pre-wrap","word-wrap":"break-word",height:"100%",width:"100%",left:"0px",top:"0px","background-color":"magenta"}},At={key:1,class:"font-bold text-align-center d-flex justify-content-center align-items-center",style:{position:"absolute","white-space":"pre-wrap","word-wrap":"break-word",height:"100%",width:"100%",left:"0px",top:"0px","background-color":"maroon"}},Pt={key:2,class:"font-bold text-align-center d-flex justify-content-center align-items-center",style:{position:"absolute","white-space":"pre-wrap","word-wrap":"break-word",height:"100%",width:"100%",left:"0px",top:"0px","background-color":"purple"}},Ot={key:3,class:"font-bold text-align-center d-flex justify-content-center align-items-center",style:{position:"absolute","white-space":"pre-wrap","word-wrap":"break-word",height:"100%",width:"100%",left:"0px",top:"0px","background-color":"forestgreen"}},Bt=d(()=>n("i",{class:"fa-solid fa-angles-left"},null,-1)),Wt=[Bt],jt=d(()=>n("i",{class:"fa-solid fa-angles-right"},null,-1)),Ft=[jt],Vt=d(()=>n("span",{id:"title",style:{color:"white"}},null,-1)),Rt={id:"friend-story",class:"story-posts-container"},zt={class:"story-keeper",style:{color:"white"}},Dt={style:{top:"0px"},class:"story-count-indicator d-flex justify-content-center"},Lt={class:"fs-3",style:{"font-weight":"bold",color:"white"}},Mt={key:0,class:"loading spinner"},Ut={key:1,class:"slideshow-container",style:{"margin-top":"0px"}},$t=["src"],Ht={key:1,style:{"background-color":"magenta"}},qt={key:0,class:"font-bold text-align-center d-flex justify-content-center align-items-center",style:{position:"absolute","white-space":"pre-wrap",height:"100%",width:"100%",left:"0px",top:"0px","background-color":"magenta"}},Gt={key:1,class:"font-bold text-align-center d-flex justify-content-center align-items-center",style:{position:"absolute","white-space":"pre-wrap",height:"100%",width:"100%",left:"0px",top:"0px","background-color":"maroon"}},Yt={key:2,class:"font-bold text-align-center d-flex justify-content-center align-items-center",style:{position:"absolute","white-space":"pre-wrap",height:"100%",width:"100%",left:"0px",top:"0px","background-color":"purple"}},Jt={key:3,class:"font-bold text-align-center d-flex justify-content-center align-items-center",style:{position:"absolute","white-space":"pre-wrap",height:"100%",width:"100%",left:"0px",top:"0px","background-color":"forestgreen"}},Kt=d(()=>n("i",{class:"fa-solid fa-angles-left"},null,-1)),Qt=[Kt],Xt=d(()=>n("i",{class:"fa-solid fa-angles-right"},null,-1)),Zt=[Xt],te=d(()=>n("span",{id:"title",style:{color:"white"}},null,-1)),ee={__name:"StoriesComponent",setup(x){const E=tt(),k=localStorage.getItem("USER_MAIL"),R=v("");let I=v(),f=y({picture:"",isLoadingStoryPic:"true"});b.post("/profile",{email:k}).then(s=>{s.data.info!=="false"&&(f.isLoadingStoryPic="false",localStorage.setItem("FIRSTNAME",s.data.first_name),localStorage.setItem("LASTNAME",s.data.last_name),localStorage.setItem("LOCATION",s.data.location),localStorage.setItem("PHONE",s.data.phone_number),localStorage.setItem("PICTURE",s.data.profile_picture),localStorage.setItem("COVER_PHOTO",s.data.coverPhoto),f.picture=localStorage.getItem("PICTURE"))}),C(I,()=>{I.value.trim().length>0?document.getElementById("post-button").removeAttribute("disabled"):document.getElementById("post-button").setAttribute("disabled","true")});let T=y({tagged_users:[],tagged_users_result:{}});y({info:[],value:[]}),C(I,()=>{let s=I.value,g=/\B@[a-z0-9_-]+/gi,t=s.match(g);if(t===null)console.log(null);else{t.forEach(w=>{T.tagged_users=w}),document.getElementById("tag_box").style.display="block";let a=new FormData,Z=T.tagged_users.substring(1);a.append("search_info",Z),b.post("/Search",a).then(w=>{T.tagged_users_result=w.data.reply}).catch(w=>{console.log(w)})}});let _=y({date:"",name:"",avatar:"",caption:"",email:"",postid:""});C(_,()=>{sessionStorage.removeItem("NEW_POST_DATE"),sessionStorage.removeItem("NEW_POSTER_NAME"),sessionStorage.removeItem("NEW_POST_AVATAR"),sessionStorage.removeItem("NEW_POST_CAPTION"),sessionStorage.setItem("NEW_POST_DATE",_.date),sessionStorage.setItem("NEW_POSTER_NAME",_.name),sessionStorage.setItem("NEW_POST_AVATAR",_.avatar),sessionStorage.setItem("NEW_POST_CAPTION",_.caption),sessionStorage.setItem("NEW_POST_POSTID",_.postid),sessionStorage.setItem("NEW_POST_EMAIL",_.email),location.reload()}),y({date:sessionStorage.getItem("NEW_POST_DATE"),name:sessionStorage.getItem("NEW_POSTER_NAME"),avatar:sessionStorage.getItem("NEW_POST_AVATAR"),caption:sessionStorage.getItem("NEW_POST_CAPTION"),postid:sessionStorage.getItem("NEW_POST_POSTID"),email:sessionStorage.getItem("NEW_POST_EMAIL")});function z(){E.push({name:"create_story"})}let r=y({post:"",user_story_is_shown:"",friend_post:"",active:"m-2 story-preview-img",story_src:"",pagination:"",friend_src:"",number_of_story:"",user_friends:"",friends_picture:""}),p=v(0);const u=v(0);function N(){b.post("/findUserStory",{email:k}).then(s=>{s.data.reply==""?E.push({name:"create_story"}):(r.post=s.data.reply,D())}).catch(s=>{alert("Network Error")})}function D(){r.active="m-2 story-preview-img magenta";let s=document.getElementById("set-story");s.style.display="block",L()}var h=v("false");function L(){h.value="true",r.story_src=r.post,r.number_of_story=r.post.length}function M(){let s=document.getElementById("set-story");s.style.display="none",h.value="false"}function U(){b.post("/findUserFriend",{email:k}).then(s=>{let g=s.data.reply;R.value=g.length,r.user_friends=s.data.reply,r.pagination=s.data.pagination}).catch(s=>{alert("Some errors occured")})}function A(s){b.post("/findUserStory",{email:s}).then(g=>{r.friend_post=g.data.reply,$()}).catch(g=>{alert("Network Error")})}function $(){r.active="m-2 story-preview-img magenta";let s=document.getElementById("friend-story");s.style.display="block",H()}function H(){h.value="true",r.number_of_story=r.friend_post.length,r.friend_src=r.friend_post}function q(){let s=document.getElementById("friend-story");s.style.display="none",h.value="false"}function G(){var s=document.getElementById("scroll-images");s.scrollBy({left:-200,behavior:"smooth"})}function Y(){var s=document.getElementById("scroll-images");s.scrollBy({left:200,behavior:"smooth"})}U(),new et(".swiper",{touchEventsTarget:"container",simulateTouch:!0,touchRatio:1,touchAngle:45,grabCursor:!0,direction:"vertical",loop:!0,pagination:{el:".swiper-pagination"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},scrollbar:{el:".swiper-scrollbar"}});const J=()=>{p.value=p.value===0?r.friend_src.length-1:p.value-1},K=()=>{p.value=p.value===r.friend_src.length-1?0:p.value+1},Q=()=>{u.value=u.value===0?r.story_src.length-1:u.value-1},X=()=>{u.value=u.value===r.story_src.length-1?0:u.value+1};return(s,g)=>(e(),o(m,null,[n("div",nt,[n("div",it,[i(f).isLoadingStoryPic==="true"?(e(),o("span",lt)):(e(),o("div",at,[n("div",ct,[n("li",dt,[n("span",{onClick:z,class:"m-3 border-50px text-success font-bold fs-1"},"+"),_t,i(f).picture===null||i(f).picture==="null"?(e(),o("img",{key:0,onClick:N,style:{width:"100%","object-fit":"cover",height:"185px"},src:P,loading:"lazy",class:O(i(r).active)},null,2)):(e(),o("img",{key:1,style:{width:"100%","object-fit":"cover",height:"185px"},loading:"lazy",onClick:N,class:O(i(r).active),src:`https://res.cloudinary.com/fishfollowers/image/upload/v1722105000/${i(f).picture}`},null,10,pt))]),(e(!0),o(m,null,S(i(r).user_friends,t=>(e(),o("li",ut,[t.picture===null||t.picture==="null"?(e(),o("img",{key:0,onClick:a=>A(t.email),style:{width:"100%","object-fit":"cover",height:"185px"},src:P,class:"m-2 story-preview-img"},null,8,ht)):(e(),o("img",{key:1,style:{width:"100%","object-fit":"cover",height:"185px"},onClick:a=>A(t.email),src:`https://res.cloudinary.com/fishfollowers/image/upload/v1722105000/${t.picture}`,class:"m-2 story-preview-img"},null,8,gt)),n("span",ft,c(t.first_name),1)]))),256))]),i(r).pagination==="true"?(e(),o("div",yt,[n("button",{onClick:G,class:"btn btn-md btn-default"},xt),n("button",{style:{"margin-left":"auto"},onClick:Y,class:"btn btn-md btn-default"},vt)])):l("",!0)]))])]),n("div",bt,[n("div",St,[n("span",{onClick:M,style:{"font-size":"50px",position:"fixed","z-index":"1",right:"0px",top:"0px",color:"white","margin-top":"0px","font-weight":"bold"}},"×"),n("ul",kt,[(e(!0),o(m,null,S(i(r).number_of_story,t=>(e(),o("li",It,"−"))),256))]),i(h)==="false"?(e(),o("span",Et)):l("",!0),(e(!0),o(m,null,S(i(r).story_src,(t,a)=>B((e(),o("div",{key:a,class:"slide"},[t.text==""&&t.isVideoFile==""?(e(),o("img",{key:0,class:"img-responsive story-img",src:`https://res.cloudinary.com/fishfollowers/image/upload/${t.file}`},null,8,Tt)):l("",!0),t.text!=""&&t.isVideoFile==""?(e(),o("div",Ct,[t.color==="user_text_story"?(e(),o("p",Nt,c(t.text),1)):t.color==="user_text_maroon"?(e(),o("p",At,c(t.text),1)):t.color==="user_text_purple"?(e(),o("p",Pt,c(t.text),1)):t.color==="user_text_green"?(e(),o("p",Ot,c(t.text),1)):l("",!0)])):l("",!0),t.isVideoFile!=""?(e(),j(F,{key:2,style:{width:"100%",height:"80vh"},video_info:{source:t.file}},null,8,["video_info"])):l("",!0)])),[[W,u.value===a]])),128)),i(r).story_src.length>1?(e(),o("button",{key:1,class:"prev",onClick:Q},Wt)):l("",!0),i(r).story_src.length>1?(e(),o("button",{key:2,class:"next",onClick:X},Ft)):l("",!0)]),Vt]),n("div",Rt,[n("div",zt,[n("span",{onClick:q,style:{"text-align":"center","font-size":"45px",position:"fixed","z-index":"1",top:"0px",right:"0px",color:"white","font-weight":"bold"}},"×"),n("ul",Dt,[(e(!0),o(m,null,S(i(r).number_of_story,t=>(e(),o("li",Lt,"−"))),256))]),i(h)==="false"?(e(),o("span",Mt)):l("",!0),i(h)==="true"?(e(),o("div",Ut,[(e(!0),o(m,null,S(i(r).friend_src,(t,a)=>B((e(),o("div",{key:a,class:"slide"},[t.text==""&&t.isVideoFile==""?(e(),o("img",{key:0,class:"img-responsive story-img",src:`https://res.cloudinary.com/fishfollowers/image/upload/${t.file}`},null,8,$t)):l("",!0),t.text!=""&&t.isVideoFile==""?(e(),o("div",Ht,[t.color==="user_text_story"?(e(),o("p",qt,c(t.text),1)):t.color==="user_text_maroon"?(e(),o("p",Gt,c(t.text),1)):t.color==="user_text_purple"?(e(),o("p",Yt,c(t.text),1)):t.color==="user_text_green"?(e(),o("p",Jt,c(t.text),1)):l("",!0)])):l("",!0),t.isVideoFile!=""?(e(),j(F,{key:2,style:{width:"100%",height:"80vh"},video_info:{source:t.file}},null,8,["video_info"])):l("",!0)])),[[W,i(p)===a]])),128)),i(r).friend_src.length>1?(e(),o("button",{key:0,class:"prev",onClick:J},Qt)):l("",!0),i(r).friend_src.length>1?(e(),o("button",{key:1,class:"next",onClick:K},Zt)):l("",!0)])):l("",!0),te])])],64))}},oe=V(ee,[["__scopeId","data-v-9b4a4954"]]),se={class:"stories-and-div-container"},re={__name:"Status",setup(x){return(E,k)=>(e(),o("div",se,[rt(oe)]))}},ie=V(re,[["__scopeId","data-v-8d873c22"]]);export{ie as default};
